using BepInEx;
using HarmonyLib;
using System.Collections;

namespace MonsterTrainInvulnerableMod
{

    [BepInPlugin(GUID, NAME, VERSION)]
    [BepInProcess("MonsterTrain.exe")]
    [BepInProcess("MtLinkHandler.exe")]
    public class Invulnerability : BaseUnityPlugin
    {
        public const string GUID = "com.github.cdietschrun.MonsterTrainInvulnerableMod";
        public const string NAME = "Invulnerable Pyre Mod";
        public const string VERSION = "0.1.0";

        private void Awake()
        {
            var harmony = new Harmony(GUID);
            harmony.PatchAll();
        }

        //[HarmonyPatch(typeof(BalanceData), "GetUpgradeSlots")]
        //public static class Mod_BalanceData_GetUpgradeSlots
        //{
        //    static void Prefix(ref int ___unitUpgradeSlots, ref int ___spellUpgradeSlots)
        //    {
        //        ___unitUpgradeSlots = SixCardUpgrades.NumCardUpgrades;
        //        ___spellUpgradeSlots = SixCardUpgrades.NumCardUpgrades;
        //    }
        //}
    }

    [HarmonyPatch(typeof(PyreRoomState), "Setup")]
    public static class Mod_BalanceData_GetUpgradeSlots3
    {
        static void Prefix(ref int __cachedPyreHP, ref int __cachedPyreMaxHP)
        {
            __cachedPyreHP = 9000;
            __cachedPyreMaxHP = 9001;
        }
    }


    [HarmonyPatch(typeof(SaveManager), "GetTowerHP")]
    public static class Mod_BalanceData_GetUpgradeSlots
    {
        private static void Postfix(ref int __towerHP)
        {
            //___unitUpgradeSlots = SixCardUpgrades.NumCardUpgrades;
            //___spellUpgradeSlots = SixCardUpgrades.NumCardUpgrades;
            __towerHP = 9000;
            //this.pyreHeart.SetAttackDamage(90);
        }
    }

    [HarmonyPatch(typeof(SaveManager), "GetMaxTowerHP")]
    public static class Mod_BalanceData_GetUpgradeSlots2
    {
        private static void Postfix(ref int __maxTowerHP)
        {
            //___unitUpgradeSlots = SixCardUpgrades.NumCardUpgrades;
            //___spellUpgradeSlots = SixCardUpgrades.NumCardUpgrades;
            __maxTowerHP = 9001;
            //this.pyreHeart.SetAttackDamage(90);
        }
    }

}
